/* express-model */

/**
 * define a certain number of global variables
 */

var models = {}									// It's used for caching all defined models.
var db = require('dbHelper')    				// It's used for connecting to specified database.

/**
 * define a Model
 */

function _defineModel(modelId, fn) {

	var newModel = Object.create();
	fn.apply(this, [ newModel, db ])

	// constructor
	if (newModel.constructor)
		newModel.constructor.apply(newModel, [])

	return models[modelId] = newModel
}

/**
 * use a Model
 */

function _useModel(modelId, fn) {

	var result = models[modelId];
	fn.apply(result, []);

	return result;
}


exports.define = _defineModel
exports.use = _useModel
