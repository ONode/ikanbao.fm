/* express-model */

/**
 * Required modules
 */

var modelsHelper = require('./modelsHelper')

/**
 * Setter Prefix Name
 */
 
var setterPrefixStr = 'setter_'

/**
 * Define a module
 */
 
var defineModel = function( fieldsMap ) {
	
	var definedModel = {}, name, setterName, temp;
	for (name in fieldsMap) {
		definedModel[name] = fieldsMap[item]		// define getters
		definedModel[setterName = setterPrefixStr + name] = 

			( temp = fieldsMap[setterName] ) || 	// define setters
				(( temp != false ) ?
					function( value ) { 
						modelsHelper.operators.update( name, value )
					}
					:function() { throw "error" }
				)
	}

}

/**
 * Startup items
 */

function startup(config) {
	if (modelsHelper.isValided) {
		modelsHelper.define = defineModel
	}
}

/* exports */

exports.use = function( name ) {
	modelsHelper.dbSupport(name).done(startup)
}
