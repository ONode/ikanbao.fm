/* express-model */

var modelsHelper = {}
var caches_Pool = {}
modelsHelper.Operators = function(name, handler) {
	if (!name || !handler) throw "error"	// It means this javascript object created must be assigned within the name and handler.
	this.name = name
	this.handler = handler
	return this;
}
modelsHelper.Operators.prototype.name = '';
modelsHelper.Operators.prototype.handler = '';
modelsHelper.Operators.bind = function( operators ) {
	for (var operator in operators) {
		this[operator.name] = operator.handler
	}
}
modelsHelper.Operators.unbind = function( operators ) {
	for (var operator in operators) {
		delete this[operator.name]
	}
}


var setterPrefixStr = 'setter_'
var defineModel = function( fieldsMap ) {
	
	var definedModel = {}, name, setterName, temp;
	for (name in fieldsMap) {
		definedModel[name] = fieldsMap[item]		// define getters
		definedModel[setterName = setterPrefixStr + name] = 

			( temp = fieldsMap[setterName] ) || 	// define setters
				(( temp != false ) ?
					function( value ) { 
						modelsHelper.update( name, value )
					}
					:function() { throw "error" }
				)
	}

}

function startup(config) {
	// body...
	
	if (modelsHelper.isValided) {
		modelsHelper.define = defineModel
	}
}

exports.modelsHelper = modelsHelper
exports.startup = startup
