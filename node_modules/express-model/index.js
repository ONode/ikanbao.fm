/* express-model */

var modelsHelper = require('./modelsHelper')
var setterPrefixStr = 'setter_'
var defineModel = function( fieldsMap ) {
	
	var definedModel = {}, name, setterName, temp;
	for (name in fieldsMap) {
		definedModel[name] = fieldsMap[item]		// define getters
		definedModel[setterName = setterPrefixStr + name] = 

			( temp = fieldsMap[setterName] ) || 	// define setters
				(( temp != false ) ?
					function( value ) { 
						modelsHelper.update( name, value )
					}
					:function() { throw "error" }
				)
	}

}

function startup(config) {
	// body...
	
	if (modelsHelper.isValided) {
		modelsHelper.define = defineModel
	}
}

exports.modelsHelper = modelsHelper
exports.startup = startup
